# Generated by Django 5.2.11 on 2026-02-13 16:06

import django.db.models.deletion
import django.utils.timezone
import simple_history.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('email_service', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='HistoricalAPIKey',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('name', models.CharField(max_length=100, verbose_name='Key Name')),
                ('key_prefix', models.CharField(db_index=True, max_length=8, verbose_name='Key Prefix')),
                ('key_hash', models.CharField(max_length=64, verbose_name='Key Hash')),
                ('permission', models.CharField(choices=[('full', 'Full Access'), ('mail_send', 'Mail Send Only'), ('read', 'Read Only'), ('templates', 'Templates Only')], default='mail_send', max_length=20, verbose_name='Permission')),
                ('allowed_ips', models.JSONField(blank=True, default=list, help_text='List of IP addresses allowed to use this key', verbose_name='Allowed IPs')),
                ('rate_limit_per_minute', models.PositiveIntegerField(default=100)),
                ('rate_limit_per_hour', models.PositiveIntegerField(default=1000)),
                ('rate_limit_per_day', models.PositiveIntegerField(default=10000)),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('last_used_at', models.DateTimeField(blank=True, null=True, verbose_name='Last Used')),
                ('expires_at', models.DateTimeField(blank=True, null=True, verbose_name='Expires At')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical API Key',
                'verbose_name_plural': 'historical API Keys',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalDailyStats',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('date', models.DateField(db_index=True, verbose_name='Date')),
                ('sent', models.PositiveIntegerField(default=0, verbose_name='Sent')),
                ('delivered', models.PositiveIntegerField(default=0, verbose_name='Delivered')),
                ('opened', models.PositiveIntegerField(default=0, verbose_name='Opened')),
                ('clicked', models.PositiveIntegerField(default=0, verbose_name='Clicked')),
                ('bounced', models.PositiveIntegerField(default=0, verbose_name='Bounced')),
                ('dropped', models.PositiveIntegerField(default=0, verbose_name='Dropped')),
                ('spam_reports', models.PositiveIntegerField(default=0, verbose_name='Spam Reports')),
                ('unsubscribes', models.PositiveIntegerField(default=0, verbose_name='Unsubscribes')),
                ('unique_opens', models.PositiveIntegerField(default=0, verbose_name='Unique Opens')),
                ('unique_clicks', models.PositiveIntegerField(default=0, verbose_name='Unique Clicks')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Daily Statistics',
                'verbose_name_plural': 'historical Daily Statistics',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEmailAttachment',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('filename', models.CharField(max_length=255, verbose_name='Filename')),
                ('content_type', models.CharField(max_length=100, verbose_name='Content Type')),
                ('size', models.PositiveIntegerField(verbose_name='Size (bytes)')),
                ('file', models.TextField(max_length=100, verbose_name='File')),
                ('content_id', models.CharField(blank=True, max_length=255, verbose_name='Content ID')),
                ('is_inline', models.BooleanField(default=False, verbose_name='Inline Attachment')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('message', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.emailmessage')),
            ],
            options={
                'verbose_name': 'historical Email Attachment',
                'verbose_name_plural': 'historical Email Attachments',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEmailEvent',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('event_type', models.CharField(choices=[('queued', 'Queued'), ('sent', 'Sent'), ('delivered', 'Delivered'), ('deferred', 'Deferred'), ('bounced', 'Bounced'), ('dropped', 'Dropped'), ('opened', 'Opened'), ('clicked', 'Clicked'), ('spam', 'Spam Report'), ('unsubscribe', 'Unsubscribe')], db_index=True, max_length=20, verbose_name='Event Type')),
                ('timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now, verbose_name='Timestamp')),
                ('url', models.URLField(blank=True, max_length=2048, verbose_name='Clicked URL')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP Address')),
                ('user_agent', models.CharField(blank=True, max_length=500, verbose_name='User Agent')),
                ('country', models.CharField(blank=True, max_length=2, verbose_name='Country')),
                ('region', models.CharField(blank=True, max_length=100, verbose_name='Region')),
                ('city', models.CharField(blank=True, max_length=100, verbose_name='City')),
                ('device_type', models.CharField(blank=True, max_length=50, verbose_name='Device Type')),
                ('browser', models.CharField(blank=True, max_length=50, verbose_name='Browser')),
                ('os', models.CharField(blank=True, max_length=50, verbose_name='Operating System')),
                ('data', models.JSONField(blank=True, default=dict, verbose_name='Event Data')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('message', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.emailmessage')),
            ],
            options={
                'verbose_name': 'historical Email Event',
                'verbose_name_plural': 'historical Email Events',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEmailMessage',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('message_id', models.CharField(db_index=True, max_length=255, verbose_name='Message ID')),
                ('from_email', models.EmailField(max_length=254, verbose_name='From Email')),
                ('from_name', models.CharField(blank=True, max_length=100, verbose_name='From Name')),
                ('reply_to', models.EmailField(blank=True, max_length=254, verbose_name='Reply To')),
                ('to_email', models.EmailField(db_index=True, max_length=254, verbose_name='To Email')),
                ('to_name', models.CharField(blank=True, max_length=100, verbose_name='To Name')),
                ('cc', models.JSONField(blank=True, default=list, verbose_name='CC')),
                ('bcc', models.JSONField(blank=True, default=list, verbose_name='BCC')),
                ('subject', models.CharField(max_length=255, verbose_name='Subject')),
                ('html_body', models.TextField(blank=True, verbose_name='HTML Body')),
                ('text_body', models.TextField(blank=True, verbose_name='Text Body')),
                ('template_data', models.JSONField(blank=True, default=dict, verbose_name='Template Data')),
                ('has_attachments', models.BooleanField(default=False, verbose_name='Has Attachments')),
                ('headers', models.JSONField(blank=True, default=dict, verbose_name='Custom Headers')),
                ('categories', models.JSONField(blank=True, default=list, verbose_name='Categories')),
                ('tags', models.JSONField(blank=True, default=list, verbose_name='Tags')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='Metadata')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='Sender IP')),
                ('user_agent', models.CharField(blank=True, max_length=500, verbose_name='User Agent')),
                ('status', models.CharField(choices=[('queued', 'Queued'), ('sending', 'Sending'), ('sent', 'Sent'), ('delivered', 'Delivered'), ('opened', 'Opened'), ('clicked', 'Clicked'), ('bounced', 'Bounced'), ('failed', 'Failed'), ('dropped', 'Dropped'), ('spam', 'Marked as Spam'), ('unsubscribed', 'Unsubscribed')], db_index=True, default='queued', max_length=20, verbose_name='Status')),
                ('bounce_type', models.CharField(blank=True, choices=[('hard', 'Hard Bounce'), ('soft', 'Soft Bounce'), ('block', 'Blocked')], max_length=10, verbose_name='Bounce Type')),
                ('bounce_reason', models.TextField(blank=True, verbose_name='Bounce Reason')),
                ('scheduled_at', models.DateTimeField(blank=True, null=True, verbose_name='Scheduled At')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Sent At')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='Delivered At')),
                ('opened_at', models.DateTimeField(blank=True, null=True, verbose_name='First Opened')),
                ('clicked_at', models.DateTimeField(blank=True, null=True, verbose_name='First Clicked')),
                ('attempt_count', models.PositiveSmallIntegerField(default=0, verbose_name='Attempt Count')),
                ('last_attempt_at', models.DateTimeField(blank=True, null=True, verbose_name='Last Attempt')),
                ('next_retry_at', models.DateTimeField(blank=True, null=True, verbose_name='Next Retry')),
                ('error_message', models.TextField(blank=True, verbose_name='Error Message')),
                ('smtp_response', models.TextField(blank=True, verbose_name='SMTP Response')),
                ('created_at', models.DateTimeField(blank=True, db_index=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('api_key', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.apikey')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('template', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.emailtemplate')),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Email Message',
                'verbose_name_plural': 'historical Email Messages',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalEmailTemplate',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('name', models.CharField(max_length=100, verbose_name='Template Name')),
                ('template_id', models.SlugField(max_length=100, verbose_name='Template ID')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('subject', models.CharField(max_length=255, verbose_name='Subject Line')),
                ('html_content', models.TextField(blank=True, verbose_name='HTML Content')),
                ('text_content', models.TextField(blank=True, verbose_name='Text Content')),
                ('content_type', models.CharField(choices=[('html', 'HTML'), ('text', 'Plain Text'), ('both', 'HTML & Text')], default='html', max_length=10, verbose_name='Content Type')),
                ('variables', models.JSONField(default=list, help_text='List of variable names used in the template', verbose_name='Template Variables')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_system', models.BooleanField(default=False, verbose_name='System Template')),
                ('version', models.PositiveIntegerField(default=1, verbose_name='Version')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Email Template',
                'verbose_name_plural': 'historical Email Templates',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalSenderDomain',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('domain', models.CharField(db_index=True, max_length=255, verbose_name='Domain')),
                ('verification_status', models.CharField(choices=[('pending', 'Pending'), ('verified', 'Verified'), ('failed', 'Failed')], default='pending', max_length=20, verbose_name='Status')),
                ('verification_token', models.CharField(max_length=64, verbose_name='Verification Token')),
                ('verified_at', models.DateTimeField(blank=True, null=True, verbose_name='Verified At')),
                ('dns_records', models.JSONField(default=dict, help_text='Required DNS records for verification', verbose_name='DNS Records')),
                ('dkim_selector', models.CharField(default='bunoraa', max_length=50, verbose_name='DKIM Selector')),
                ('dkim_public_key', models.TextField(blank=True, verbose_name='DKIM Public Key')),
                ('dkim_private_key', models.TextField(blank=True, verbose_name='DKIM Private Key')),
                ('dkim_verified', models.BooleanField(default=False, verbose_name='DKIM Verified')),
                ('spf_verified', models.BooleanField(default=False, verbose_name='SPF Verified')),
                ('dmarc_verified', models.BooleanField(default=False, verbose_name='DMARC Verified')),
                ('is_default', models.BooleanField(default=False, verbose_name='Default Domain')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('last_checked_at', models.DateTimeField(blank=True, null=True, verbose_name='Last Checked')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Sender Domain',
                'verbose_name_plural': 'historical Sender Domains',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalSenderIdentity',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('email', models.EmailField(db_index=True, max_length=254, verbose_name='Email Address')),
                ('from_name', models.CharField(max_length=100, verbose_name='From Name')),
                ('reply_to', models.EmailField(blank=True, max_length=254, verbose_name='Reply To')),
                ('verification_status', models.CharField(choices=[('pending', 'Pending'), ('verified', 'Verified')], default='pending', max_length=20, verbose_name='Status')),
                ('verification_token', models.CharField(max_length=64, verbose_name='Verification Token')),
                ('verified_at', models.DateTimeField(blank=True, null=True, verbose_name='Verified At')),
                ('is_default', models.BooleanField(default=False, verbose_name='Default Identity')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('domain', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.senderdomain')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Sender Identity',
                'verbose_name_plural': 'historical Sender Identities',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalSuppression',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('email', models.EmailField(db_index=True, max_length=254, verbose_name='Email Address')),
                ('suppression_type', models.CharField(choices=[('bounce_hard', 'Hard Bounce'), ('bounce_soft', 'Soft Bounce'), ('spam', 'Spam Report'), ('unsubscribe', 'Unsubscribe'), ('manual', 'Manually Added'), ('invalid', 'Invalid Email')], max_length=20, verbose_name='Type')),
                ('reason', models.TextField(blank=True, verbose_name='Reason')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('removed_at', models.DateTimeField(blank=True, null=True, verbose_name='Removed At')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('removed_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('source_message', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.emailmessage')),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Suppression',
                'verbose_name_plural': 'historical Suppressions',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalTemplateVersion',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('version', models.PositiveIntegerField(verbose_name='Version')),
                ('subject', models.CharField(max_length=255, verbose_name='Subject Line')),
                ('html_content', models.TextField(blank=True, verbose_name='HTML Content')),
                ('text_content', models.TextField(blank=True, verbose_name='Text Content')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('change_notes', models.TextField(blank=True, verbose_name='Change Notes')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('template', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.emailtemplate')),
            ],
            options={
                'verbose_name': 'historical Template Version',
                'verbose_name_plural': 'historical Template Versions',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalUnsubscribeGroup',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('name', models.CharField(max_length=100, verbose_name='Group Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('is_default', models.BooleanField(default=False, verbose_name='Default Group')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Unsubscribe Group',
                'verbose_name_plural': 'historical Unsubscribe Groups',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalUnsubscribePreference',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('email', models.EmailField(db_index=True, max_length=254, verbose_name='Email Address')),
                ('is_unsubscribed', models.BooleanField(default=True, verbose_name='Unsubscribed')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('group', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.unsubscribegroup')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Unsubscribe Preference',
                'verbose_name_plural': 'historical Unsubscribe Preferences',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalWebhook',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('name', models.CharField(max_length=100, verbose_name='Webhook Name')),
                ('url', models.URLField(max_length=500, verbose_name='Webhook URL')),
                ('events', models.JSONField(default=list, help_text='List of event types to trigger this webhook', verbose_name='Events')),
                ('secret', models.CharField(max_length=64, verbose_name='Signing Secret')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('total_sent', models.PositiveIntegerField(default=0, verbose_name='Total Sent')),
                ('total_failed', models.PositiveIntegerField(default=0, verbose_name='Total Failed')),
                ('last_sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Last Sent')),
                ('last_error', models.TextField(blank=True, verbose_name='Last Error')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Webhook',
                'verbose_name_plural': 'historical Webhooks',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalWebhookLog',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('event_type', models.CharField(max_length=50, verbose_name='Event Type')),
                ('payload', models.JSONField(verbose_name='Payload')),
                ('response_status', models.PositiveSmallIntegerField(null=True, verbose_name='Response Status')),
                ('response_body', models.TextField(blank=True, verbose_name='Response Body')),
                ('response_time_ms', models.PositiveIntegerField(null=True, verbose_name='Response Time (ms)')),
                ('success', models.BooleanField(default=False, verbose_name='Success')),
                ('error_message', models.TextField(blank=True, verbose_name='Error')),
                ('attempt', models.PositiveSmallIntegerField(default=1, verbose_name='Attempt')),
                ('created_at', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('webhook', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='email_service.webhook')),
            ],
            options={
                'verbose_name': 'historical Webhook Log',
                'verbose_name_plural': 'historical Webhook Logs',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
    ]
